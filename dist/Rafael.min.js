!function(a,b){if("function"==typeof define&&define.amd)define("Rafael",["module"],b);else if("undefined"!=typeof exports)b(module);else{var c={exports:{}};b(c),a.Rafael=c.exports}}(this,function(a){"use strict";var b;b=function(){this.paused=!1,this.tasks={},this._startLoop=this._startLoop.bind(this),this._startLoop()},b.prototype.schedule=function(a,b,c){var d;if("string"!=typeof a&&(c=b,b=a,a=Object.keys(this.tasks).length),c||(c={}),this._debug=c.debug||!1,this._frame=0,d=Math.ceil(c.framerate||60),this._debug&&console.log("Scheduling task",a),d>60)throw new RangeError("Framerate may not be higher than 60; Requested framerate is",d);if(this.tasks[a])throw new RangeError('A task with the ID "'+a+'" already exists');return this.tasks[a]={context:c.context||window,paused:c.paused||!1,framerate:d,task:b},a},b.prototype.unschedule=function(a){return this._debug&&console.log("Unscheduling task",a),delete this.tasks[a],!this.tasks[a]},b.prototype.clear=function(){this._debug&&console.log("Clearing tasks"),this.tasks={}},b.prototype.pause=function(a){this._debug&&console.log("Pausing",a||"all tasks"),a?this.tasks[a].paused=!0:this.paused=!0},b.prototype.start=function(a){this._debug&&console.log("Starting",a||"all tasks"),a?this.tasks[a].paused=!1:this.paused=!1},b.prototype._taskCaller=function(a){a.task.call(a.context)},b.prototype._startLoop=function(){var a,b,c;if(b=this,c=Object.keys(this.tasks),requestAnimationFrame(b._startLoop),!this.paused){for(a=0;a<c.length;a++){var d;d=this.tasks[c[a]],60!==d.framerate&&!this._shouldRun(d.framerate)||d.paused||this._taskCaller(d)}this._frame++}},b.prototype._shouldRun=function(a){return!Math.floor(this._frame%(60/a))},a.exports=b});